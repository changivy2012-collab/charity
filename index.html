<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Charity Project Creator</title>
    <script>
        // Check if this is first visit (no localStorage flag)
        if (!localStorage.getItem('visitedBefore')) {
            localStorage.setItem('visitedBefore', 'true');
            window.location.href = 'welcome.html';
        }
    </script>
    <script>
  function loadSupabase() {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@latest';
    script.onerror = function() {
      console.log('CDN failed, loading from local supabase.js');
      const fallbackScript = document.createElement('script');
      fallbackScript.src = './supabase.js';
      document.head.appendChild(fallbackScript);
    };
    document.head.appendChild(script);
  }
  loadSupabase();
</script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            color: white;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .nav-tab {
            padding: 15px 30px;
            background: rgba(255,255,255,0.2);
            margin: 0 10px 10px 0;
            border-radius: 8px;
            cursor: pointer;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .nav-tab:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .nav-tab.active {
            background: white;
            color: #667eea;
        }
        
        .tab-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .project-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .project-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .project-card p {
            margin-bottom: 10px;
        }
        
        .project-detail {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .donation-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .donation-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .donation-option {
            padding: 10px 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .donation-option:hover, .donation-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .project-plan {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .plan-section {
            margin-bottom: 20px;
        }
        
        .plan-section h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .promotion-material {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .social-post {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .strategy-tip {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: translateX(200%);
            transition: transform 0.3s;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(90deg, #28a745, #218838);
        }
        
        .notification.error {
            background: linear-gradient(90deg, #dc3545, #c82333);
        }
        
        .welcome-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            text-align: center;
        }
        
        .earth-image {
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
            background-image: url('earth-image.jpg'), url('https://images.unsplash.com/photo-1614730321146-b6e5ef0a7a52');
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }
        
        .welcome-message {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 50px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            color: white;
        }
        
        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .nav-tab {
                margin: 0 0 10px 0;
                text-align: center;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Personalized Charity Project Creator</h1>
            <p>Create Your Unique Charity Project Based on Your Interests</p>
        </div>
        
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="welcome">Welcome</div>
            <div class="nav-tab" data-tab="creator">Project Creator</div>
            <div class="nav-tab" data-tab="projects">My Projects</div>
            <div class="nav-tab" data-tab="donate">Donate</div>
            <div class="nav-tab" data-tab="plan">Project Plan</div>
            <div class="nav-tab" data-tab="promotion">Promotion Plan</div>
        </div>
        
        <div class="tab-content">
            <!-- Welcomeæ¨¡å— -->
            <div class="tab-pane active" id="welcome-tab">
                <div class="welcome-container">
                    <div class="earth-image"></div>
                    <h1 class="welcome-message">Rise above, lift others up</h1>
                    <button class="btn" onclick="showInstructions()">Get Started</button>
                </div>
            </div>
            
            <!-- é¡¹ç›®åˆ›å»ºæ¨¡å— -->
            <div class="tab-pane" id="creator-tab">
                <h2>Create Your Personalized Charity Project</h2>
                <form id="project-form">
                    <div class="form-group">
                        <label for="project-name">Project Name</label>
                        <input type="text" id="project-name" placeholder="Enter a name for your charity project">
                    </div>
                    
                    <div class="form-group">
                        <label for="interests">Your Interests & Hobbies</label>
                        <textarea id="interests" rows="4" placeholder="List your interests, hobbies, and skills (e.g., music, sports, technology, art, cooking, etc.)"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="cause">Preferred Cause Area</label>
                        <select id="cause">
                            <option value="">Select a cause area</option>
                            <option value="education">Education</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="environment">Environment</option>
                            <option value="animals">Animal Welfare</option>
                            <option value="poverty">Poverty Alleviation</option>
                            <option value="arts">Arts & Culture</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="target-audience">Target Audience</label>
                        <select id="target-audience">
                            <option value="">Select target audience</option>
                            <option value="children">Children</option>
                            <option value="youth">Youth</option>
                    <option value="elderly">Elderly</option>
                    <option value="disabled">People with Disabilities</option>
                    <option value="general">General Public</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="project-description">Project Description</label>
                <textarea id="project-description" rows="6" placeholder="Describe how your interests will be integrated into this charity project"></textarea>
            </div>
            
            <button type="button" class="btn btn-primary" id="create-project-btn">Create Project</button>
        </form>
    </div>
    
    <!-- æˆ‘çš„é¡¹ç›®æ¨¡å— -->
    <div class="tab-pane" id="projects-tab">
        <h2>My Charity Projects</h2>
        <div id="projects-list">
            <!-- é¡¹ç›®å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            <p id="no-projects-message">You haven't created any projects yet. Start by creating your first personalized charity project!</p>
        </div>
    </div>
    
    <!-- æèµ æ¨¡å— -->
    <div class="tab-pane" id="donate-tab">
        <h2>Support a Charity Project</h2>
        <div id="donation-projects">
            <!-- æèµ é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            <p>Select a project to donate to from the list below:</p>
        </div>
    </div>
    
    <!-- é¡¹ç›®è®¡åˆ’æ¨¡å— -->
    <div class="tab-pane" id="plan-tab">
        <h2>Detailed Project Plan</h2>
        <div id="project-plan-content">
            <p>Create a project first to generate a detailed plan.</p>
        </div>
    </div>
    
    <!-- å®£ä¼ è®¡åˆ’æ¨¡å— -->
    <div class="tab-pane" id="promotion-tab">
        <h2>Promotion Plan Generator</h2>
        <div id="promotion-plan-content">
            <p>Create a project first to generate a promotion plan.</p>
        </div>
    </div>
</div>

<div class="notification" id="notification"></div>

<script type="module">
    // å¼•å…¥ Supabase å®¢æˆ·ç«¯å’Œä¿å­˜å‡½æ•°
    import { saveProject, loadProjectsFromSupabase } from './supabase.js';
    
    // é¡¹ç›®æ•°æ®
    let projects = [];
    let currentProject = null;
    
    // åˆå§‹åŒ–åº”ç”¨
    document.addEventListener('DOMContentLoaded', async function() {
        await loadProjects();
        renderProjects();
        renderDonationProjects();
        
        // è®¾ç½®æ ‡ç­¾é¡µåˆ‡æ¢
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                switchTab(tabId);
            });
        });
        
        // ç»‘å®šåˆ›å»ºé¡¹ç›®æŒ‰é’®äº‹ä»¶
        const createProjectBtn = document.getElementById('create-project-btn');
        if (createProjectBtn) {
            createProjectBtn.addEventListener('click', createProject);
        }
        
        // åŠ¨æ€ç»‘å®šé¡¹ç›®å¡ç‰‡æŒ‰é’®äº‹ä»¶
        document.addEventListener('click', function(event) {
            // æŸ¥çœ‹é¡¹ç›®è®¡åˆ’æŒ‰é’®
            if (event.target.classList.contains('view-plan-btn')) {
                const projectId = parseInt(event.target.getAttribute('data-project-id'));
                viewProjectPlan(projectId);
            }
            
            // æèµ åˆ°é¡¹ç›®æŒ‰é’®
            if (event.target.classList.contains('donate-btn')) {
                const projectId = parseInt(event.target.getAttribute('data-project-id'));
                donateToProject(projectId);
            }
            
            // æèµ é¡¹ç›®æŒ‰é’®
            if (event.target.classList.contains('donate-project-btn')) {
                const projectId = parseInt(event.target.getAttribute('data-project-id'));
                openDonationForm(projectId);
            }
            
            // ä¸‹è½½è®¡åˆ’æŒ‰é’®
            if (event.target.classList.contains('download-plan-btn')) {
                const projectId = parseInt(event.target.getAttribute('data-project-id'));
                downloadPlan(projectId);
            }
            
            // æèµ åˆ°é¡¹ç›®æŒ‰é’®ï¼ˆåœ¨è®¡åˆ’è¯¦æƒ…ä¸­ï¼‰
            if (event.target.classList.contains('donate-to-project-btn')) {
                const projectId = parseInt(event.target.getAttribute('data-project-id'));
                donateToProject(projectId);
            }
            
            // ç”Ÿæˆå®£ä¼ è®¡åˆ’æŒ‰é’®
            if (event.target.classList.contains('generate-promotion-plan-btn')) {
                const projectId = parseInt(event.target.getAttribute('data-project-id'));
                generatePromotionPlan(projectId);
            }
            
            // ä¸‹è½½å®£ä¼ è®¡åˆ’æŒ‰é’®
            if (event.target.classList.contains('download-promotion-plan-btn')) {
                const projectId = parseInt(event.target.getAttribute('data-project-id'));
                downloadPromotionPlan(projectId);
            }
            
            // é€‰æ‹©æèµ é‡‘é¢
            if (event.target.classList.contains('donation-option') && event.target.hasAttribute('data-amount')) {
                const amount = parseInt(event.target.getAttribute('data-amount'));
                selectDonationAmount(amount);
            }
            
            // é€‰æ‹©æ”¯ä»˜æ–¹å¼
            if (event.target.classList.contains('donation-option') && event.target.hasAttribute('data-method')) {
                const method = event.target.getAttribute('data-method');
                selectPaymentMethod(method);
            }
            
            // å®Œæˆæèµ æŒ‰é’®
            if (event.target.id === 'complete-donation-btn') {
                processDonation();
            }
            
            // å–æ¶ˆæèµ æŒ‰é’®
            if (event.target.id === 'cancel-donation-btn') {
                renderDonationProjects();
                switchTab('donate');
            }
        });
    });
    
    // æ ‡ç­¾é¡µåˆ‡æ¢
    function showInstructions() {
            document.querySelector('#welcome-tab').innerHTML = `
                <div class="welcome-container">
                    <h1 style="margin-bottom: 30px;">How to Use This Website</h1>
                    
                    <div style="text-align: left; margin-bottom: 40px;">
                        <h2 style="margin: 20px 0 10px; color: white;">1. Create a Project</h2>
                        <p>Click on "Create Project" to start your own charity initiative.</p>
                        
                        <h2 style="margin: 20px 0 10px; color: white;">2. Customize Your Project</h2>
                        <p>Add details about your cause, target audience, and how you want to help.</p>
                        
                        <h2 style="margin: 20px 0 10px; color: white;">3. Generate a Plan</h2>
                        <p>Our system will create a customized promotion plan based on your interests.</p>
                        
                        <h2 style="margin: 20px 0 10px; color: white;">4. Share and Donate</h2>
                        <p>Share your project with others and accept donations to support your cause.</p>
                    </div>
                    
                    <button class="btn" onclick="switchTab('creator')">Get Started</button>
                </div>
            `;
        }
        
        function switchTab(tabId) {
        // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
        
        // æ˜¾ç¤ºå¯¹åº”å†…å®¹
        document.querySelectorAll('.tab-pane').forEach(pane => {
            pane.classList.remove('active');
        });
        document.getElementById(`${tabId}-tab`).classList.add('active');
    }
    
    // åˆ›å»ºé¡¹ç›®
    async function createProject() {
        const projectName = document.getElementById('project-name').value;
        const interests = document.getElementById('interests').value;
        const cause = document.getElementById('cause').value;
        const targetAudience = document.getElementById('target-audience').value;
        const projectDescription = document.getElementById('project-description').value;
        
        if (!projectName || !interests || !cause || !targetAudience || !projectDescription) {
            showNotification('Please fill in all fields', 'error');
            return;
        }
        
        const project = {
            name: projectName,
            interests: interests,
            cause: cause,
            targetAudience: targetAudience,
            description: projectDescription,
            createdAt: new Date().toISOString(),
            donations: 0,
            projectplan: generateProjectPromotionPlan({
                name: projectName,
                interests: interests,
                cause: cause,
                targetAudience: targetAudience,
                description: projectDescription
            })
        };
        
        // ä¿å­˜é¡¹ç›®åˆ°Supabaseï¼ˆä¸»è¦å­˜å‚¨æ–¹å¼ï¼‰
        try {
            const result = await saveProject(project);
            if (result.success) {
                console.log('é¡¹ç›®æˆåŠŸä¿å­˜åˆ°Supabase');
                showNotification('Project created successfully!', 'success');
                
                // é‡æ–°ä»SupabaseåŠ è½½æœ€æ–°æ•°æ®
                await loadProjects();
                renderProjects();
                renderDonationProjects();
            } else {
                console.error('ä¿å­˜é¡¹ç›®å¤±è´¥:', result.error);
                showNotification('Failed to save project: ' + result.error, 'error');
            }
        } catch (error) {
            console.error('åˆ›å»ºé¡¹ç›®æ—¶å‡ºé”™:', error);
            showNotification('åˆ›å»ºé¡¹ç›®å¤±è´¥: ' + error.message, 'error');
        }
        
        // æ¸…ç©ºè¡¨å•
        document.getElementById('project-form').reset();
        
        switchTab('projects');
    }
    
    // æ¸²æŸ“é¡¹ç›®åˆ—è¡¨
    function renderProjects() {
        const projectsList = document.getElementById('projects-list');
        
        // å®‰å…¨åœ°è®¿é—® no-projects-message å…ƒç´ 
        const noProjectsMessage = document.getElementById('no-projects-message');
        
        if (projects.length === 0) {
            if (noProjectsMessage) {
                noProjectsMessage.style.display = 'block';
            }
            return;
        }
        
        if (noProjectsMessage) {
            noProjectsMessage.style.display = 'none';
        }
        
        projectsList.innerHTML = '';
        
        projects.forEach(project => {
            const projectCard = document.createElement('div');
            projectCard.className = 'project-card';
            projectCard.innerHTML = `
                <h3>${project.name}</h3>
                <p><strong>Interests:</strong> ${project.interests}</p>
                <p><strong>Cause:</strong> ${project.cause}</p>
                <p><strong>Target Audience:</strong> ${project.targetAudience}</p>
                <p><strong>Description:</strong> ${project.description}</p>
                <button class="btn btn-primary view-plan-btn" data-project-id="${project.id}">View Detailed Plan</button>
                <button class="btn btn-primary donate-btn" data-project-id="${project.id}" style="margin-left: 10px;">Donate</button>
            `;
            projectsList.appendChild(projectCard);
        });
    }
    
    // æ¸²æŸ“æèµ é¡¹ç›®
    function renderDonationProjects() {
        const donationProjects = document.getElementById('donation-projects');
        
        if (projects.length === 0) {
            donationProjects.innerHTML = '<p>No projects available for donation yet.</p>';
            return;
        }
        
        donationProjects.innerHTML = '<p>Select a project to donate to from the list below:</p>';
        
        projects.forEach(project => {
            const projectCard = document.createElement('div');
            projectCard.className = 'project-card';
            projectCard.innerHTML = `
                <h3>${project.name}</h3>
                <p><strong>Cause:</strong> ${project.cause}</p>
                <p><strong>Description:</strong> ${project.description.substring(0, 100)}...</p>
                <button class="btn btn-primary donate-project-btn" data-project-id="${project.id}">Donate to this Project</button>
            `;
            donationProjects.appendChild(projectCard);
        });
    }
    
    // æŸ¥çœ‹é¡¹ç›®è®¡åˆ’
    function viewProjectPlan(projectId) {
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        
        currentProject = project;
        const planContent = document.getElementById('project-plan-content');
        
        // ç”Ÿæˆè¯¦ç»†çš„é¡¹ç›®è®¡åˆ’
        const plan = generateProjectPlan(project);
        
        planContent.innerHTML = `
            <div class="project-detail">
                <h3>${project.name} - Detailed Plan</h3>
                <div class="project-plan">
                    ${project.projectplan}
                </div>
                <button class="btn btn-primary download-plan-btn" data-project-id="${project.id}">Download Plan as PDF</button>
                <button class="btn btn-primary donate-to-project-btn" data-project-id="${project.id}" style="margin-left: 10px;">Donate to this Project</button>
                <button class="btn btn-primary generate-promotion-plan-btn" data-project-id="${project.id}" style="margin-left: 10px;">Generate Promotion Plan</button>
            </div>
        `;
        
        switchTab('plan');
    }
    
    // ç”Ÿæˆå®£ä¼ è®¡åˆ’
    function generatePromotionPlan(projectId) {
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        
        currentProject = project;
        const promotionContent = document.getElementById('promotion-plan-content');
        
        // ç”Ÿæˆå®£ä¼ è®¡åˆ’
        const promotionPlan = generateProjectPromotionPlan(project);
        
        promotionContent.innerHTML = `
            <div class="project-detail">
                <h3>${project.name} - Promotion Plan</h3>
                <div class="project-plan">
                    ${promotionPlan}
                </div>
                <button class="btn btn-primary download-promotion-plan-btn" data-project-id="${project.id}">Download Promotion Plan as PDF</button>
            </div>
        `;
        
        switchTab('promotion');
    }
    
    // ç”Ÿæˆé¡¹ç›®è®¡åˆ’
    function generateProjectPlan(project) {
        // æ ¹æ®ç”¨æˆ·çš„å…´è¶£å’Œé€‰æ‹©çš„é¢†åŸŸç”Ÿæˆå®šåˆ¶åŒ–çš„é¡¹ç›®è®¡åˆ’
        let plan = `
            <div class="plan-section">
                <h4>ğŸ¯ Project Overview</h4>
                <p><strong>Project Name:</strong> ${project.name}</p>
                <p><strong>Focus Area:</strong> ${project.cause}</p>
                <p><strong>Target Audience:</strong> ${project.targetAudience}</p>
                <p><strong>Integration of Personal Interests:</strong> ${project.description}</p>
                <p><strong>Project Vision:</strong> Creating lasting positive impact by combining personal passion with social responsibility</p>
                <p><strong>Mission Statement:</strong> To leverage individual talents and interests to address ${project.cause} challenges while empowering the ${project.targetAudience} community</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ¯ Strategic Objectives</h4>
                <p><strong>Primary Goals:</strong></p>
                <p>1. <strong>Awareness & Education:</strong> Raise awareness about ${project.cause} through engaging activities that incorporate the creator's interests in ${project.interests}</p>
                <p>2. <strong>Direct Impact:</strong> Provide meaningful, measurable support to the ${project.targetAudience} community with specific outcomes</p>
                <p>3. <strong>Sustainability:</strong> Create a replicable model that can be adopted by others with similar interests and scaled for broader impact</p>
                <p>4. <strong>Community Building:</strong> Foster a network of supporters, volunteers, and beneficiaries for long-term engagement</p>
                <p>5. <strong>Innovation:</strong> Demonstrate creative approaches to social challenges through personal interest integration</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ“Š Detailed Impact Metrics & KPIs</h4>
                <p><strong>Quantitative Measures:</strong></p>
                <p>â€¢ Direct beneficiaries served: Target 100+ individuals in first 6 months</p>
                <p>â€¢ Funds raised: Goal of $10,000+ through various activities</p>
                <p>â€¢ Volunteer engagement: Recruit 25+ active volunteers</p>
                <p>â€¢ Social media reach: 5,000+ people engaged across platforms</p>
                <p>â€¢ Partnership development: Establish 5+ strategic partnerships</p>
                <p><strong>Qualitative Measures:</strong></p>
                <p>â€¢ Beneficiary satisfaction surveys (target 90%+ positive feedback)</p>
                <p>â€¢ Community awareness assessment</p>
                <p>â€¢ Volunteer retention and satisfaction</p>
                <p>â€¢ Media coverage and public recognition</p>
                <p>â€¢ Long-term behavior change in target audience</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ¯ Target Audience Analysis</h4>
                <p><strong>Primary Beneficiaries (${project.targetAudience}):</strong></p>
                <p>â€¢ Demographics: Age range, location, socioeconomic status</p>
                <p>â€¢ Specific needs and challenges related to ${project.cause}</p>
                <p>â€¢ Current resources and gaps in services</p>
                <p>â€¢ Preferred communication channels and engagement methods</p>
                <p><strong>Secondary Stakeholders:</strong></p>
                <p>â€¢ Donors and supporters interested in ${project.cause}</p>
                <p>â€¢ Volunteers with skills in ${project.interests}</p>
                <p>â€¢ Partner organizations and community leaders</p>
                <p>â€¢ Local businesses and potential sponsors</p>
            </div>
        `;
        
        // æ ¹æ®å…´è¶£å’Œé¢†åŸŸæ·»åŠ å…·ä½“æ´»åŠ¨
        if (project.interests.toLowerCase().includes('music')) {
            plan += `
                <div class="plan-section">
                    <h4>Music-Based Activities</h4>
                    <p>â€¢ Organize benefit concerts to raise funds and awareness</p>
                    <p>â€¢ Create music workshops for the target audience</p>
                    <p>â€¢ Record and distribute inspirational songs related to the cause</p>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('art') || project.interests.toLowerCase().includes('painting')) {
            plan += `
                <div class="plan-section">
                    <h4>Art-Based Activities</h4>
                    <p>â€¢ Host art exhibitions with proceeds supporting the cause</p>
                    <p>â€¢ Conduct art therapy sessions for the target audience</p>
                    <p>â€¢ Create murals in community spaces to raise awareness</p>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('sports') || project.interests.toLowerCase().includes('athletic')) {
            plan += `
                <div class="plan-section">
                    <h4>Sports-Based Activities</h4>
                    <p>â€¢ Organize charity runs, walks, or tournaments</p>
                    <p>â€¢ Provide sports equipment and training to the target audience</p>
                    <p>â€¢ Create sports mentorship programs</p>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('technology') || project.interests.toLowerCase().includes('coding')) {
            plan += `
                <div class="plan-section">
                    <h4>Technology-Based Activities</h4>
                    <p>â€¢ Develop apps or websites to support the cause</p>
                    <p>â€¢ Provide technology training to the target audience</p>
                    <p>â€¢ Create digital campaigns to raise awareness</p>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('cooking') || project.interests.toLowerCase().includes('food')) {
            plan += `
                <div class="plan-section">
                    <h4>Food-Based Activities</h4>
                    <p>â€¢ Organize charity cooking events and food sales</p>
                    <p>â€¢ Provide cooking classes to the target audience</p>
                    <p>â€¢ Create community gardens or food distribution programs</p>
                </div>
            `;
        }
        
        // æ·»åŠ é€šç”¨è®¡åˆ’éƒ¨åˆ†
        plan += `
            <div class="plan-section">
                <h4>ğŸ“… Detailed Implementation Timeline</h4>
                <p><strong>Phase 1: Foundation (Month 1-2)</strong></p>
                <p>â€¢ Week 1-2: Comprehensive needs assessment and stakeholder mapping</p>
                <p>â€¢ Week 3-4: Team recruitment and volunteer orientation</p>
                <p>â€¢ Week 5-6: Partnership development and resource mobilization</p>
                <p>â€¢ Week 7-8: Program design finalization and pilot testing</p>
                
                <p><strong>Phase 2: Launch (Month 3-4)</strong></p>
                <p>â€¢ Week 9-10: Soft launch with limited participants for feedback</p>
                <p>â€¢ Week 11-12: Full program launch and marketing campaign</p>
                <p>â€¢ Week 13-14: First major event/activity implementation</p>
                <p>â€¢ Week 15-16: Initial impact assessment and program adjustments</p>
                
                <p><strong>Phase 3: Growth (Month 5-8)</strong></p>
                <p>â€¢ Month 5: Scale up activities and expand participant base</p>
                <p>â€¢ Month 6: Mid-program evaluation and strategy refinement</p>
                <p>â€¢ Month 7: Major fundraising event and community showcase</p>
                <p>â€¢ Month 8: Partnership expansion and sustainability planning</p>
                
                <p><strong>Phase 4: Evaluation & Sustainability (Month 9-12)</strong></p>
                <p>â€¢ Month 9: Comprehensive impact evaluation</p>
                <p>â€¢ Month 10: Documentation and best practices development</p>
                <p>â€¢ Month 11: Transition planning and handover preparation</p>
                <p>â€¢ Month 12: Final reporting and future planning</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ’° Comprehensive Budget Breakdown</h4>
                <p><strong>Total Project Budget: $15,000</strong></p>
                
                <p><strong>Program Implementation (60% - $9,000):</strong></p>
                <p>â€¢ Materials and supplies: $4,500</p>
                <p>â€¢ Equipment and technology: $2,500</p>
                <p>â€¢ Venue rentals and utilities: $1,500</p>
                <p>â€¢ Transportation and logistics: $500</p>
                
                <p><strong>Human Resources (25% - $3,750):</strong></p>
                <p>â€¢ Part-time coordinator stipend: $2,000</p>
                <p>â€¢ Volunteer training and recognition: $1,000</p>
                <p>â€¢ Expert consultants and speakers: $750</p>
                
                <p><strong>Marketing & Outreach (10% - $1,500):</strong></p>
                <p>â€¢ Digital marketing and social media: $600</p>
                <p>â€¢ Print materials and signage: $400</p>
                <p>â€¢ Event promotion and media: $500</p>
                
                <p><strong>Administrative Costs (5% - $750):</strong></p>
                <p>â€¢ Insurance and legal compliance: $300</p>
                <p>â€¢ Financial management and reporting: $250</p>
                <p>â€¢ Contingency fund: $200</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ¯ Risk Management & Mitigation</h4>
                <p><strong>Identified Risks:</strong></p>
                <p>â€¢ <strong>Funding shortfall:</strong> Diversify funding sources, apply for grants, organize multiple fundraising events</p>
                <p>â€¢ <strong>Low volunteer engagement:</strong> Implement recognition programs, provide meaningful roles, regular appreciation events</p>
                <p>â€¢ <strong>Weather/external disruptions:</strong> Develop backup plans, virtual alternatives, flexible scheduling</p>
                <p>â€¢ <strong>Regulatory compliance:</strong> Early consultation with legal experts, proper documentation, insurance coverage</p>
                <p>â€¢ <strong>Technology failures:</strong> Backup systems, technical support partnerships, manual alternatives</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ¤ Partnership & Collaboration Strategy</h4>
                <p><strong>Strategic Partners:</strong></p>
                <p>â€¢ Local nonprofits working in ${project.cause}</p>
                <p>â€¢ Community centers and venues</p>
                <p>â€¢ Educational institutions and schools</p>
                <p>â€¢ Local businesses and corporate sponsors</p>
                <p>â€¢ Media outlets and influencers</p>
                <p>â€¢ Government agencies and officials</p>
                
                <p><strong>Collaboration Benefits:</strong></p>
                <p>â€¢ Resource sharing and cost reduction</p>
                <p>â€¢ Expanded reach and credibility</p>
                <p>â€¢ Knowledge exchange and best practices</p>
                <p>â€¢ Sustainable long-term impact</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ“ˆ Success Metrics & Evaluation Framework</h4>
                <p><strong>Short-term Indicators (1-3 months):</strong></p>
                <p>â€¢ Number of people directly served</p>
                <p>â€¢ Volunteer recruitment and retention rates</p>
                <p>â€¢ Social media engagement and reach</p>
                <p>â€¢ Initial funds raised for the cause</p>
                
                <p><strong>Medium-term Outcomes (3-6 months):</strong></p>
                <p>â€¢ Awareness level increase in the community</p>
                <p>â€¢ Partnership agreements established</p>
                <p>â€¢ Program participation and completion rates</p>
                <p>â€¢ Media coverage and public recognition</p>
                
                <p><strong>Long-term Impact (6-12 months):</strong></p>
                <p>â€¢ Sustained behavior change in beneficiaries</p>
                <p>â€¢ Community capacity building achievements</p>
                <p>â€¢ Program replication by other organizations</p>
                <p>â€¢ Policy influence and systemic change</p>
            </div>
        `;
        
        return plan;
    }
    
    // ç”Ÿæˆé¡¹ç›®å®£ä¼ è®¡åˆ’
    function generateProjectPromotionPlan(project) {
        // æ ¹æ®ç”¨æˆ·çš„å…´è¶£å’Œé€‰æ‹©çš„é¢†åŸŸç”Ÿæˆå®šåˆ¶åŒ–çš„å®£ä¼ è®¡åˆ’
        let plan = `
            <div class="plan-section">
                <h4>ğŸ“¢ Comprehensive Promotion Overview</h4>
                <p><strong>Project Name:</strong> ${project.name}</p>
                <p><strong>Focus Area:</strong> ${project.cause}</p>
                <p><strong>Target Audience:</strong> ${project.targetAudience}</p>
                <p><strong>Personal Interests Integrated:</strong> ${project.interests}</p>
                <p><strong>Promotion Goal:</strong> Achieve 10,000+ people reached, 500+ active supporters, and $5,000+ raised through promotional activities</p>
                <p><strong>Campaign Duration:</strong> 12 weeks leading up to and during project implementation</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ¯ Strategic Messaging Framework</h4>
                <p><strong>Core Message:</strong> "Passion Meets Purpose - Where ${project.interests} Creates Change for ${project.cause}"</p>
                
                <p><strong>Key Messages:</strong></p>
                <p>1. <strong>Innovation:</strong> "Raising awareness about ${project.cause} through innovative, engaging activities that break traditional charity molds"</p>
                <p>2. <strong>Impact:</strong> "Making a measurable, meaningful difference in the ${project.targetAudience} community through targeted interventions"</p>
                <p>3. <strong>Authenticity:</strong> "Demonstrating how personal passions and genuine interests can drive sustainable social change"</p>
                <p>4. <strong>Community:</strong> "Building a movement where everyone can contribute their unique talents to address ${project.cause}"</p>
                <p>5. <strong>Transparency:</strong> "Providing clear, honest updates on progress, challenges, and impact to build trust with supporters"</p>
                
                <p><strong>Emotional Appeals:</strong></p>
                <p>â€¢ Hope: "Together, we can create a brighter future for ${project.targetAudience}"</p>
                <p>â€¢ Empowerment: "Your support directly enables life-changing opportunities"</p>
                <p>â€¢ Belonging: "Join a community of changemakers who share your values"</p>
                <p>â€¢ Pride: "Be part of an innovative solution that others will want to replicate"</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ‘¥ Detailed Audience Segmentation</h4>
                <p><strong>Primary Audiences:</strong></p>
                
                <p><strong>1. Personal Network (30% of outreach):</strong></p>
                <p>â€¢ Family, friends, colleagues, and acquaintances</p>
                <p>â€¢ People who share interest in ${project.interests}</p>
                <p>â€¢ Previous supporters of similar causes</p>
                <p>â€¢ Messaging: Personal stories, direct asks, behind-the-scenes content</p>
                
                <p><strong>2. ${project.cause} Community (25% of outreach):</strong></p>
                <p>â€¢ Existing supporters of ${project.cause} organizations</p>
                <p>â€¢ Professionals working in related fields</p>
                <p>â€¢ Advocacy groups and activists</p>
                <p>â€¢ Messaging: Impact data, collaboration opportunities, expert insights</p>
                
                <p><strong>3. ${project.interests} Enthusiasts (25% of outreach):</strong></p>
                <p>â€¢ Communities centered around ${project.interests}</p>
                <p>â€¢ Clubs, groups, and online forums</p>
                <p>â€¢ Influencers and content creators in the space</p>
                <p>â€¢ Messaging: Creative integration, skill-sharing, unique approach</p>
                
                <p><strong>4. Local Community (20% of outreach):</strong></p>
                <p>â€¢ Neighbors, local businesses, community leaders</p>
                <p>â€¢ Local media and bloggers</p>
                <p>â€¢ Municipal organizations and civic groups</p>
                <p>â€¢ Messaging: Local impact, community pride, partnership opportunities</p>
            </div>
        `;
        
        // æ ¹æ®å…´è¶£æ·»åŠ å®£ä¼ ææ–™
        if (project.interests.toLowerCase().includes('music')) {
            plan += `
                <div class="plan-section">
                    <h4>Music-Based Promotion Materials</h4>
                    <div class="promotion-material">
                        <h5>Press Release Sample</h5>
                        <p>"Local Musician Launches Charity Project to Support ${project.cause}"</p>
                        <p>Event Details: Benefit Concert for ${project.name}</p>
                    </div>
                    <div class="social-post">
                        <h5>Social Media Post</h5>
                        <p>ğŸµ Join me for a night of music with a purpose! All proceeds from my concert will support ${project.name}, helping ${project.targetAudience} in our community. Let's make a difference together! #CharityConcert #${project.cause}</p>
                    </div>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('art') || project.interests.toLowerCase().includes('painting')) {
            plan += `
                <div class="plan-section">
                    <h4>Art-Based Promotion Materials</h4>
                    <div class="promotion-material">
                        <h5>Press Release Sample</h5>
                        <p>"Artist Exhibition to Raise Funds for ${project.cause}"</p>
                        <p>Showcasing local talent while supporting a worthy cause</p>
                    </div>
                    <div class="social-post">
                        <h5>Social Media Post</h5>
                        <p>ğŸ¨ Art meets activism! My exhibition "${project.name}" combines creativity with compassion. Every piece sold supports ${project.cause} initiatives for ${project.targetAudience}. Visit the gallery and be part of the change! #ArtForACause #${project.cause}</p>
                    </div>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('sports') || project.interests.toLowerCase().includes('athletic')) {
            plan += `
                <div class="plan-section">
                    <h4>Sports-Based Promotion Materials</h4>
                    <div class="promotion-material">
                        <h5>Press Release Sample</h5>
                        <p>"Charity Run/Walk to Support ${project.cause}"</p>
                        <p>Community event combines fitness with fundraising</p>
                    </div>
                    <div class="social-post">
                        <h5>Social Media Post</h5>
                        <p>ğŸƒâ€â™‚ï¸ Ready to run for a reason? Join the "${project.name}" charity run/walk! Lace up your sneakers and help us support ${project.cause} for ${project.targetAudience}. Every step makes a difference! #CharityRun #${project.cause}</p>
                    </div>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('technology') || project.interests.toLowerCase().includes('coding')) {
            plan += `
                <div class="plan-section">
                    <h4>Technology-Based Promotion Materials</h4>
                    <div class="promotion-material">
                        <h5>Press Release Sample</h5>
                        <p>"Tech Innovation Meets Social Impact: ${project.name} Launch"</p>
                        <p>Developer creates app to support ${project.cause} initiatives</p>
                    </div>
                    <div class="social-post">
                        <h5>Social Media Post</h5>
                        <p>ğŸ’» Tech for good! My new app "${project.name}" harnesses the power of technology to support ${project.cause} for ${project.targetAudience}. Download now and be part of the solution! #TechForGood #${project.cause}</p>
                    </div>
                </div>
            `;
        }
        
        if (project.interests.toLowerCase().includes('cooking') || project.interests.toLowerCase().includes('food')) {
            plan += `
                <div class="plan-section">
                    <h4>Food-Based Promotion Materials</h4>
                    <div class="promotion-material">
                        <h5>Press Release Sample</h5>
                        <p>"Chef's Charity Dinner to Benefit ${project.cause}"</p>
                        <p>Culinary event raises funds for ${project.targetAudience} community</p>
                    </div>
                    <div class="social-post">
                        <h5>Social Media Post</h5>
                        <p>ğŸ½ï¸ Good food, great cause! Join me for an unforgettable charity dinner supporting ${project.name}. Delicious cuisine meets social impact - your taste buds will thank you and so will the ${project.targetAudience} community! #CharityDinner #${project.cause}</p>
                    </div>
                </div>
            `;
        }
        
        // æ·»åŠ é€šç”¨æ¨å¹¿ç­–ç•¥
        plan += `
            <div class="plan-section">
                <h4>ğŸ“± Multi-Channel Promotion Strategy</h4>
                
                <div class="strategy-tip">
                    <h5>ğŸŒ Digital Marketing (40% of effort)</h5>
                    <p><strong>Social Media Platforms:</strong></p>
                    <p>â€¢ <strong>Instagram:</strong> Visual storytelling, behind-the-scenes content, Stories, Reels showcasing ${project.interests} integration</p>
                    <p>â€¢ <strong>Facebook:</strong> Event creation, community building, detailed posts, live streaming of activities</p>
                    <p>â€¢ <strong>Twitter:</strong> Real-time updates, hashtag campaigns, engagement with ${project.cause} community</p>
                    <p>â€¢ <strong>LinkedIn:</strong> Professional networking, partnership outreach, thought leadership content</p>
                    <p>â€¢ <strong>TikTok:</strong> Creative short videos demonstrating ${project.interests} for ${project.cause}</p>
                    <p>â€¢ <strong>YouTube:</strong> Longer-form content, tutorials, impact documentaries</p>
                    
                    <p><strong>Content Strategy:</strong></p>
                    <p>â€¢ Post 3-5 times per week across platforms</p>
                    <p>â€¢ Use branded hashtags: #${project.name.replace(/\s+/g, '')} #${project.interests.split(',')[0].trim()}For${project.cause.charAt(0).toUpperCase() + project.cause.slice(1)}</p>
                    <p>â€¢ Share user-generated content and testimonials</p>
                    <p>â€¢ Create shareable infographics about ${project.cause}</p>
                    <p>â€¢ Host live Q&A sessions and virtual events</p>
                </div>
                
                <div class="strategy-tip">
                    <h5>ğŸ“§ Email Marketing & Direct Outreach (25% of effort)</h5>
                    <p><strong>Email Campaigns:</strong></p>
                    <p>â€¢ Welcome series for new subscribers (3-part series)</p>
                    <p>â€¢ Weekly project updates with impact stories</p>
                    <p>â€¢ Personalized asks to different donor segments</p>
                    <p>â€¢ Event invitations and reminders</p>
                    <p>â€¢ Thank you and impact reports post-donation</p>
                    
                    <p><strong>List Building:</strong></p>
                    <p>â€¢ Lead magnets: Free guides related to ${project.interests} and ${project.cause}</p>
                    <p>â€¢ Contest entries and giveaways</p>
                    <p>â€¢ Event registrations and volunteer sign-ups</p>
                    <p>â€¢ Partner organization cross-promotion</p>
                </div>
                
                <div class="strategy-tip">
                    <h5>ğŸ¤ Community & Partnership Outreach (20% of effort)</h5>
                    <p><strong>Local Partnerships:</strong></p>
                    <p>â€¢ Collaborate with ${project.interests} clubs and organizations</p>
                    <p>â€¢ Partner with local businesses for sponsorship and cross-promotion</p>
                    <p>â€¢ Engage with existing ${project.cause} nonprofits for joint initiatives</p>
                    <p>â€¢ Connect with community centers and venues for events</p>
                    
                    <p><strong>Influencer & Advocate Engagement:</strong></p>
                    <p>â€¢ Identify micro-influencers in ${project.interests} and ${project.cause} spaces</p>
                    <p>â€¢ Reach out to local celebrities and public figures</p>
                    <p>â€¢ Engage with advocacy groups and thought leaders</p>
                    <p>â€¢ Create ambassador program for key supporters</p>
                </div>
                
                <div class="strategy-tip">
                    <h5>ğŸ“º Traditional Media & PR (15% of effort)</h5>
                    <p><strong>Media Outreach:</strong></p>
                    <p>â€¢ Press releases to local newspapers, radio, and TV stations</p>
                    <p>â€¢ Pitch unique angle: ${project.interests} meets ${project.cause}</p>
                    <p>â€¢ Offer expert commentary on related issues</p>
                    <p>â€¢ Submit to community calendars and event listings</p>
                    
                    <p><strong>Content Creation:</strong></p>
                    <p>â€¢ Professional photos and videos of activities</p>
                    <p>â€¢ Written testimonials and case studies</p>
                    <p>â€¢ Infographics and data visualizations</p>
                    <p>â€¢ Branded materials and merchandise</p>
                </div>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ“… 12-Week Promotional Timeline</h4>
                
                <p><strong>Weeks 1-2: Foundation & Launch</strong></p>
                <p>â€¢ Set up all social media accounts and branding</p>
                <p>â€¢ Create content calendar and initial content batch</p>
                <p>â€¢ Launch website and donation platform</p>
                <p>â€¢ Send announcement emails to personal network</p>
                <p>â€¢ Begin reaching out to potential partners</p>
                
                <p><strong>Weeks 3-4: Awareness Building</strong></p>
                <p>â€¢ Daily social media posting begins</p>
                <p>â€¢ First press release and media outreach</p>
                <p>â€¢ Host virtual launch event</p>
                <p>â€¢ Begin influencer outreach</p>
                <p>â€¢ Create and share first impact story</p>
                
                <p><strong>Weeks 5-6: Community Engagement</strong></p>
                <p>â€¢ Partner announcements and cross-promotion</p>
                <p>â€¢ First major fundraising push</p>
                <p>â€¢ Host ${project.interests}-themed promotional event</p>
                <p>â€¢ Launch ambassador program</p>
                <p>â€¢ Increase posting frequency</p>
                
                <p><strong>Weeks 7-8: Momentum Building</strong></p>
                <p>â€¢ Mid-campaign evaluation and strategy adjustment</p>
                <p>â€¢ Major media interviews and features</p>
                <p>â€¢ Volunteer recruitment drive</p>
                <p>â€¢ Corporate sponsorship outreach</p>
                <p>â€¢ User-generated content campaign</p>
                
                <p><strong>Weeks 9-10: Peak Promotion</strong></p>
                <p>â€¢ Major event or milestone celebration</p>
                <p>â€¢ Intensive social media campaign</p>
                <p>â€¢ Final major fundraising push</p>
                <p>â€¢ Media blitz and interviews</p>
                <p>â€¢ Community challenge or contest</p>
                
                <p><strong>Weeks 11-12: Sustaining & Transition</strong></p>
                <p>â€¢ Thank you campaign for supporters</p>
                <p>â€¢ Impact reporting and transparency</p>
                <p>â€¢ Planning for ongoing engagement</p>
                <p>â€¢ Documentation of lessons learned</p>
                <p>â€¢ Transition to program implementation phase</p>
            </div>
            
            <div class="plan-section">
                <h4>ğŸ“Š Comprehensive Success Metrics</h4>
                
                <p><strong>Reach & Awareness Metrics:</strong></p>
                <p>â€¢ Total people reached across all channels: Target 10,000+</p>
                <p>â€¢ Social media followers gained: Target 1,000+</p>
                <p>â€¢ Website unique visitors: Target 2,500+</p>
                <p>â€¢ Email list growth: Target 500+ subscribers</p>
                <p>â€¢ Media mentions and coverage: Target 10+ articles/features</p>
                
                <p><strong>Engagement Metrics:</strong></p>
                <p>â€¢ Social media engagement rate: Target 5%+</p>
                <p>â€¢ Email open rate: Target 25%+</p>
                <p>â€¢ Email click-through rate: Target 5%+</p>
                <p>â€¢ Event attendance: Target 100+ people per event</p>
                <p>â€¢ User-generated content pieces: Target 50+</p>
                
                <p><strong>Conversion Metrics:</strong></p>
                <p>â€¢ Total funds raised through promotion: Target $5,000+</p>
                <p>â€¢ Number of donors acquired: Target 100+</p>
                <p>â€¢ Volunteer sign-ups: Target 25+</p>
                <p>â€¢ Partnership agreements: Target 5+</p>
                <p>â€¢ Conversion rate (visitors to donors): Target 4%+</p>
                
                <p><strong>Quality Metrics:</strong></p>
                <p>â€¢ Donor retention rate: Target 60%+</p>
                <p>â€¢ Average donation amount: Target $50+</p>
                <p>â€¢ Net Promoter Score: Target 8+</p>
                <p>â€¢ Brand sentiment analysis: Target 80%+ positive</p>
                <p>â€¢ Long-term supporter engagement: Target 40%+ ongoing</p>
            </div>
        `;
        
        return plan;
    }
    
    // æèµ åˆ°é¡¹ç›®
    function donateToProject(projectId) {
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        
        openDonationForm(projectId);
    }
    
    // æ‰“å¼€æèµ è¡¨å•
    function openDonationForm(projectId) {
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        
        currentProject = project;
        switchTab('donate');
        
        const donationProjects = document.getElementById('donation-projects');
        donationProjects.innerHTML = `
            <div class="project-detail">
                <h3>Donate to: ${project.name}</h3>
                <p><strong>Cause:</strong> ${project.cause}</p>
                <p><strong>Description:</strong> ${project.description}</p>
                
                <div class="donation-form">
                    <h4>Donation Details</h4>
                    <div class="form-group">
                        <label for="donor-name">Your Name</label>
                        <input type="text" id="donor-name" placeholder="Enter your name">
                    </div>
                    
                    <div class="form-group">
                        <label for="donation-amount">Donation Amount ($)</label>
                        <input type="number" id="donation-amount" min="1" placeholder="Enter amount">
                    </div>
                    
                    <div class="form-group">
                        <label>Suggested Donation Amounts</label>
                        <div class="donation-options">
                            <div class="donation-option" data-amount="10">$10</div>
                            <div class="donation-option" data-amount="25">$25</div>
                            <div class="donation-option" data-amount="50">$50</div>
                            <div class="donation-option" data-amount="100">$100</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="donation-message">Message (Optional)</label>
                        <textarea id="donation-message" rows="3" placeholder="Add a message to the project creator"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>ğŸ’³ Payment Method</label>
                        <div class="donation-options">
                            <div class="donation-option" data-method="credit-card">ğŸ’³ Credit Card</div>
                            <div class="donation-option" data-method="paypal">ğŸ’° PayPal</div>
                            <div class="donation-option" data-method="bank-transfer">ğŸ¦ Bank Transfer</div>
                            <div class="donation-option" data-method="wechat">ğŸ’¬ WeChat Pay</div>
                            <div class="donation-option" data-method="other">ğŸ“ Other Contact</div>
                        </div>
                        <input type="hidden" id="payment-method" value="">
                    </div>
                    
                    <div id="payment-details" style="display: none;">
                        <div id="wechat-details" style="display: none;">
                            <div class="form-group">
                                <label for="wechat-id">Your WeChat ID (for donation coordination)</label>
                                <input type="text" id="wechat-id" placeholder="Enter your WeChat ID">
                                <small style="color: #666; font-size: 0.9em;">Project creator will contact you via WeChat to coordinate the donation</small>
                            </div>
                        </div>
                        
                        <div id="other-contact-details" style="display: none;">
                            <div class="form-group">
                                <label for="contact-method">Preferred Contact Method</label>
                                <select id="contact-method">
                                    <option value="">Select contact method</option>
                                    <option value="phone">Phone Call</option>
                                    <option value="email">Email</option>
                                    <option value="whatsapp">WhatsApp</option>
                                    <option value="telegram">Telegram</option>
                                    <option value="line">LINE</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="contact-info">Contact Information</label>
                                <input type="text" id="contact-info" placeholder="Enter your contact details">
                                <small style="color: #666; font-size: 0.9em;">Project creator will reach out to coordinate your donation</small>
                            </div>
                        </div>
                        
                        <div id="standard-payment-details" style="display: none;">
                            <p style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 10px 0;">
                                <strong>ğŸ“‹ Next Steps:</strong><br>
                                After clicking "Complete Donation", you'll be redirected to the secure payment processor to complete your donation.
                            </p>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" id="complete-donation-btn">Complete Donation</button>
                    <button class="btn" id="cancel-donation-btn" style="margin-left: 10px;">Cancel</button>
                </div>
            </div>
        `;
    }
    
    // é€‰æ‹©æèµ é‡‘é¢
    function selectDonationAmount(amount) {
        document.getElementById('donation-amount').value = amount;
        
        // æ›´æ–°é€‰ä¸­çŠ¶æ€
        document.querySelectorAll('.donation-option').forEach(option => {
            option.classList.remove('selected');
        });
        
        event.target.classList.add('selected');
    }
    
    // é€‰æ‹©æ”¯ä»˜æ–¹å¼
    function selectPaymentMethod(method) {
        document.getElementById('payment-method').value = method;
        
        // æ›´æ–°é€‰ä¸­çŠ¶æ€
        document.querySelectorAll('.donation-option').forEach(option => {
            option.classList.remove('selected');
        });
        
        event.target.classList.add('selected');
        
        // æ˜¾ç¤ºç›¸åº”çš„æ”¯ä»˜è¯¦æƒ…
        const paymentDetails = document.getElementById('payment-details');
        const wechatDetails = document.getElementById('wechat-details');
        const otherContactDetails = document.getElementById('other-contact-details');
        const standardPaymentDetails = document.getElementById('standard-payment-details');
        
        // éšè—æ‰€æœ‰è¯¦æƒ…
        wechatDetails.style.display = 'none';
        otherContactDetails.style.display = 'none';
        standardPaymentDetails.style.display = 'none';
        
        if (method === 'wechat') {
            paymentDetails.style.display = 'block';
            wechatDetails.style.display = 'block';
        } else if (method === 'other') {
            paymentDetails.style.display = 'block';
            otherContactDetails.style.display = 'block';
        } else if (method === 'credit-card' || method === 'paypal' || method === 'bank-transfer') {
            paymentDetails.style.display = 'block';
            standardPaymentDetails.style.display = 'block';
        } else {
            paymentDetails.style.display = 'none';
        }
    }
    
    // å¤„ç†æèµ 
    async function processDonation() {
        const donorName = document.getElementById('donor-name').value;
        const donationAmount = document.getElementById('donation-amount').value;
        const donationMessage = document.getElementById('donation-message').value;
        
        if (!donorName || !donationAmount) {
            showNotification('Please enter your name and donation amount', 'error');
            return;
        }
        
        if (currentProject) {
            try {
                // æ›´æ–°å½“å‰é¡¹ç›®çš„æèµ é‡‘é¢
                const updatedDonations = (currentProject.donations || 0) + parseInt(donationAmount);
                
                // ç­‰å¾…supabaseå®¢æˆ·ç«¯åˆå§‹åŒ–
                while (!window.supabaseModule.supabase) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                // æ›´æ–°Supabaseä¸­çš„é¡¹ç›®æ•°æ®
                const { data, error } = await window.supabaseModule.supabase
                    .from('projects')
                    .update({ donations: updatedDonations })
                    .eq('id', currentProject.id)
                    .select();
                
                if (error) {
                    throw error;
                }
                
                if (data && data.length > 0) {
                    console.log('æèµ ä¿¡æ¯å·²æ›´æ–°åˆ°Supabase');
                    
                    // é‡æ–°åŠ è½½æœ€æ–°æ•°æ®
                    await loadProjects();
                    renderProjects();
                    renderDonationProjects();
                    
                    showNotification(`Thank you, ${donorName}! Your $${donationAmount} donation was successful.`, 'success');
                }
            } catch (error) {
                console.error('æ›´æ–°æèµ ä¿¡æ¯å¤±è´¥:', error);
                showNotification('Failed to process donation: ' + error.message, 'error');
            }
        }
        
        // é‡ç½®è¡¨å•
        document.getElementById('donor-name').value = '';
        document.getElementById('donation-amount').value = '';
        document.getElementById('donation-message').value = '';
        
        // æ¸…é™¤é€‰ä¸­çŠ¶æ€
        document.querySelectorAll('.donation-option').forEach(option => {
            option.classList.remove('selected');
        });
    }
    
    // ä¸‹è½½è®¡åˆ’ä¸ºPDF
    function downloadPlan(projectId) {
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        
        const plan = generateProjectPlan(project);
        const content = `Project Plan for ${project.name}

${plan.replace(/<[^>]*>/g, '')}`;
        
        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${project.name.replace(/\s+/g, '_')}_Plan.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
    
    // ä¸‹è½½å®£ä¼ è®¡åˆ’ä¸ºPDF
    function downloadPromotionPlan(projectId) {
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        
        const promotionPlan = generateProjectPromotionPlan(project);
        const content = `Promotion Plan for ${project.name}

${promotionPlan.replace(/<[^>]*>/g, '')}`;
        
        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${project.name.replace(/\s+/g, '_')}_Promotion_Plan.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
    
    // æ˜¾ç¤ºé€šçŸ¥
    function showNotification(message, type) {
        const notification = document.getElementById('notification');
        notification.textContent = message;
        notification.className = `notification ${type} show`;
        
        setTimeout(() => {
            notification.classList.remove('show');
        }, 3000);
    }
    
    // ä¿å­˜é¡¹ç›®åˆ°Supabaseï¼ˆä¸å†ä½¿ç”¨æœ¬åœ°å­˜å‚¨ï¼‰
    async function saveProjects() {
        // ä¸å†éœ€è¦æœ¬åœ°å­˜å‚¨ï¼Œæ•°æ®ç›´æ¥ä»Supabaseè·å–
        console.log('æ•°æ®å·²ä¿å­˜åˆ°Supabase');
    }
    
    // ä»SupabaseåŠ è½½é¡¹ç›®ï¼ˆä¸å†ä»æœ¬åœ°ç¼“å­˜è¯»å–ï¼‰
    async function loadProjects() {
        try {
            const result = await loadProjectsFromSupabase();
            if (result.success) {
                projects = result.data;
                console.log('ä»SupabaseæˆåŠŸåŠ è½½ ' + projects.length + ' ä¸ªé¡¹ç›®');
            } else {
                console.error('ä»SupabaseåŠ è½½é¡¹ç›®å¤±è´¥:', result.error);
                // å¦‚æœSupabaseåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨ç©ºæ•°ç»„
                projects = [];
            }
        } catch (error) {
            console.error('åŠ è½½é¡¹ç›®æ—¶å‡ºé”™:', error);
            projects = [];
        }
    }
</script>
</body>
</html>